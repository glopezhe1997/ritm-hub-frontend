<div *ngIf="results" class="bg-[#0a0f1a] p-2">
  <!-- Desktop layout: aside + main -->
  <div class="hidden md:flex">
    <!-- Aside: Artists, Albums & Playlists Carousel -->
    <aside class="w-1/4 p-4 bg-[#181f2f] rounded-lg mr-4 my-14">
      <!-- Artists Carousel -->
      <div *ngIf="getFilteredArtists().length" class="mb-8">
        <h2 class="text-lg text-[#9810FA] mb-2">Artists</h2>
        <div class="relative flex items-center justify-center">
          <button
            class="absolute left-0 z-10 bg-[#9810FA] text-white px-2 py-1 rounded-full"
            (click)="artistIndex = Math.max(artistIndex - 1, 0)"
            [disabled]="artistIndex === 0"
            aria-label="Previous artist"
          >&lt;</button>
          <div class="flex flex-col items-center mx-auto w-32">
            <img
              *ngIf="getFilteredArtists()[artistIndex]?.images?.length"
              [src]="getFilteredArtists()[artistIndex].images[0].url"
              [alt]="getFilteredArtists()[artistIndex].name"
              class="w-24 h-24 object-cover rounded-full mb-2"
            />
            <p class="text-white font-semibold text-center">
              {{ getFilteredArtists()[artistIndex].name }}
            </p>
          </div>
          <button
            class="absolute right-0 z-10 bg-[#9810FA] text-white px-2 py-1 rounded-full"
            (click)="artistIndex = Math.min(artistIndex + 1, getFilteredArtists().length - 1)"
            [disabled]="artistIndex === getFilteredArtists().length - 1"
            aria-label="Next artist"
          >&gt;</button>
        </div>
      </div>
      <!-- Albums Carousel -->
      <div *ngIf="getFilteredAlbums().length" class="mb-8">
        <h2 class="text-lg text-[#9810FA] mb-2">Albums</h2>
        <div class="relative flex items-center justify-center">
          <button
            class="absolute left-0 z-10 bg-[#9810FA] text-white px-2 py-1 rounded-full"
            (click)="albumIndex = Math.max(albumIndex - 1, 0)"
            [disabled]="albumIndex === 0"
            aria-label="Previous album"
          >&lt;</button>
          <div class="flex flex-col items-center mx-auto w-32">
            <img
              *ngIf="getFilteredAlbums()[albumIndex]?.images?.length"
              [src]="getFilteredAlbums()[albumIndex].images[0].url"
              [alt]="getFilteredAlbums()[albumIndex].name"
              class="w-24 h-24 object-cover rounded-lg mb-2"
            />
            <p class="text-white font-semibold text-center">
              {{ getFilteredAlbums()[albumIndex].name }}
            </p>
          </div>
          <button
            class="absolute right-0 z-10 bg-[#9810FA] text-white px-2 py-1 rounded-full"
            (click)="albumIndex = Math.min(albumIndex + 1, getFilteredAlbums().length - 1)"
            [disabled]="albumIndex === getFilteredAlbums().length - 1"
            aria-label="Next album"
          >&gt;</button>
        </div>
      </div>
      <!-- Playlists Carousel -->
      <div *ngIf="getFilteredPlaylists().length" class="mb-8">
        <h2 class="text-lg text-[#9810FA] mb-2">Playlists</h2>
        <div class="relative flex items-center justify-center">
          <button
            class="absolute left-0 z-10 bg-[#9810FA] text-white px-2 py-1 rounded-full"
            (click)="playlistIndex = Math.max(playlistIndex - 1, 0)"
            [disabled]="playlistIndex === 0"
            aria-label="Previous playlist"
          >&lt;</button>
          <div class="flex flex-col items-center mx-auto w-32">
            <img
              *ngIf="getFilteredPlaylists()[playlistIndex]?.images?.length"
              [src]="getFilteredPlaylists()[playlistIndex].images[0].url"
              [alt]="getFilteredPlaylists()[playlistIndex].name"
              class="w-24 h-24 object-cover rounded-lg mb-2"
            />
            <p class="text-white font-semibold text-center">
              {{ getFilteredPlaylists()[playlistIndex].name }}
            </p>
          </div>
          <button
            class="absolute right-0 z-10 bg-[#9810FA] text-white px-2 py-1 rounded-full"
            (click)="playlistIndex = Math.min(playlistIndex + 1, getFilteredPlaylists().length - 1)"
            [disabled]="playlistIndex === getFilteredPlaylists().length - 1"
            aria-label="Next playlist"
          >&gt;</button>
        </div>
      </div>
    </aside>
    <!-- Main: Tracks -->
    <main class="w-full">
      <!-- Tracks -->
      <div *ngIf="getFilteredTracks().length" class="my-5">
        <h2 class="text-lg text-[#9810FA] mb-2">Tracks</h2>
        <div
          *ngFor="let track of getFilteredTracks()"
          class="w-full flex justify-between items-center p-4 bg-[#1E2939] rounded-lg my-2"
        >
          <div class="flex items-center gap-4">
            <img
              *ngIf="track.album?.images?.length"
              [src]="track.album.images[0].url"
              [alt]="track.name"
              class="w-16 h-16 object-cover rounded-lg"
            />
            <div>
              <p class="text-white font-semibold">{{ track.name }}</p>
              <span class="text-gray-400 text-sm">
                By {{ getArtistNames(track.artists) }}
              </span>
            </div>
          </div>
          <span class="text-gray-300 text-sm">
            {{ (track.duration_ms / 60000) | number:'1.0-0' }}:{{ ((track.duration_ms % 60000) / 1000) | number:'2.0-0' }}
          </span>
        </div>
      </div>
    </main>
  </div>
  <!-- Mobile layout -->
  <div class="block md:hidden">
    <!-- Artists -->
    <div *ngIf="getFilteredArtists().length" class="mb-5">
      <h2 class="text-lg text-[#9810FA] mb-2">Artists</h2>
      <div class="flex flex-wrap gap-8 justify-center">
        <div
          *ngFor="let artist of getFilteredArtists()"
          class="flex flex-col items-center w-32"
        >
          <img
            *ngIf="artist.images?.length"
            [src]="artist.images[0].url"
            [alt]="artist.name"
            class="w-24 h-24 object-cover rounded-full mb-2"
          />
          <p class="text-white font-semibold text-center">{{ artist.name }}</p>
        </div>
      </div>
    </div>
    <!-- Albums -->
    <div *ngIf="getFilteredAlbums().length" class="my-5">
      <h2 class="text-lg text-[#9810FA] mb-2">Albums</h2>
      <div class="flex flex-wrap gap-8 justify-center">
        <div
          *ngFor="let album of getFilteredAlbums()"
          class="flex flex-col items-center w-32"
        >
          <img
            *ngIf="album.images?.length"
            [src]="album.images[0].url"
            [alt]="album.name"
            class="w-24 h-24 object-cover rounded-lg mb-2"
          />
          <p class="text-white font-semibold text-center">{{ album.name }}</p>
        </div>
      </div>
    </div>
    <!-- Tracks -->
    <div *ngIf="getFilteredTracks().length" class="my-5">
      <h2 class="text-lg text-[#9810FA] mb-2">Tracks</h2>
      <div
        *ngFor="let track of getFilteredTracks()"
        class="w-4/5 flex justify-between items-center p-4 bg-[#1E2939] rounded-lg my-2"
      >
        <div class="flex items-center gap-4">
          <img
            *ngIf="track.album?.images?.length"
            [src]="track.album.images[0].url"
            [alt]="track.name"
            class="w-16 h-16 object-cover rounded-lg"
          />
          <div>
            <p class="text-white font-semibold">{{ track.name }}</p>
            <span class="text-gray-400 text-sm">
              By {{ getArtistNames(track.artists) }}
            </span>
          </div>
        </div>
        <span class="text-gray-300 text-sm">
          {{ (track.duration_ms / 60000) | number:'1.0-0' }}:{{ ((track.duration_ms % 60000) / 1000) | number:'2.0-0' }}
        </span>
      </div>
    </div>
    <!-- Playlists -->
    <div *ngIf="getFilteredPlaylists().length" class="my-5">
      <h2 class="text-lg text-[#9810FA] mb-2">Playlists</h2>
      <div class="flex flex-wrap gap-8 justify-center">
        <div
          *ngFor="let playlist of getFilteredPlaylists()"
          class="flex flex-col items-center w-32"
        >
          <img
            *ngIf="playlist?.images?.length"
            [src]="playlist.images[0].url"
            [alt]="playlist.name"
            class="w-24 h-24 object-cover rounded-lg mb-2"
          />
          <p class="text-white font-semibold text-center">{{ playlist.name }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
<div *ngIf="!results">
  <p class="text-white text-center mt-8">No results found.</p>
</div>